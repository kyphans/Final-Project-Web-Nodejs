
  <h2>Edit Profile</h2>
  <br>
  <div id="editUserModal" class="">
    <div class="">
      <div class="">
          <div class="">
            <div class="form-group">
              <div id="tr_id" hidden></div>
              <div id="_id" hidden><%- auth._id %></div>
              <label class="mt-2">Họ và tên</label>
              <input type="name" class="form-control" id="edit-name" name="name" value="<%- auth.name %>">
              <label class="mt-3">Khoa/Phòng ban</label>
              <select class="form-control" id="edit-department_id" name="department_id">
                <% department.forEach((element, index) => { %> 
                  <%- 
                  `<option value="${element._id}">${element.name}</option>`
                  %>
                <% });  %> 
              </select>            
              <label class="mt-3">Email</label>
              <input type="email" class="form-control" id="edit-email" name="email" value="<%- auth.email %>">            
              <label class="mt-3">Password</label>
              <input type="password" class="form-control" id="edit-password" name="password">
            </div>
          </div>
          <div class="modal-footer">
            <input type="submit" class="btn btn-success" value="Xác nhận" onclick="editAccountNoAjax()">
          </div>
      </div>
    </div>
  </div>


  <p>File upload:</p>
  <div id="email" hidden><%- auth.email  %></div>
  <div class="custom-file mb-3">
    <input type="file" class="custom-file-input" id="filename" name="filename">
    <label class="custom-file-label" for="customFile">Choose file</label>
  </div>
  <div class="mt-3">
    <button id="uploadButton" type="submit" class="btn btn-primary" >Submit</button>
  </div>
  

  
<!-- </div> -->

<script>
  // Add the following code if you want the name of the file appear on select
  $(".custom-file-input").on("change", function () {
    var fileName = $(this).val().split("\\").pop();
    $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
  });

  $('#uploadButton').click(() => {
      let uploadFile = document.getElementById('filename');
      if (uploadFile.files.length === 0) {
        return alert('Vui long chon tap tin')
      }

      let file = uploadFile.files[0];
      let form = new FormData();
      form.set('email', $("#email").text());
      form.set('path', '')
      form.set('filename', file)

      let xhr = new XMLHttpRequest();
      xhr.open('POST', 'http://localhost:3030/account/edit-info',true)
      xhr.addEventListener('load', e => {
        if(xhr.readyState === 4 && xhr.status === 200){
          const json = JSON.parse(xhr.responseText)
          console.log(json)
        }
      })
      xhr.send(form)
    })

</script>